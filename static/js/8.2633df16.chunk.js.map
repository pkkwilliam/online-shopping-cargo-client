{"version":3,"sources":["component/userSection/pickupQRCode/pickupQRCode.view.js","component/userSection/pickupQRCode/pickupQRCode.js"],"names":["PickupQRCodeView","this","props","onGetPickupQrCode","pickupCode","Wrapper","style","styles","rootContainer","QRCodeSection","value","onClick","color","styleSchema","ApplicationComponentView","alignItems","flexDirection","justifyContent","paddingTop","PickupQRCode","state","pickupQrCodeResponse","undefined","expire","onError","exception","setError","show","body","message","header","serviceExecutor","execute","GET_PICKUP_QR_CODE","then","setState","setTimeout","catch","ex","onCloseModal","onCloseError","ClientApplicationComponent"],"mappings":"sUAMqBA,E,uKACT,IAAD,EACmCC,KAAKC,MAAvCC,EADD,EACCA,kBAAmBC,EADpB,EACoBA,WAC3B,OACE,uBAAMC,QAAN,KACE,kBAAC,IAAD,CAAMC,MAAOC,EAAOC,eAClB,uBAAMC,cAAN,CAAoBC,MAAON,IAC3B,uBAAGO,QAASR,EAAmBG,MAAO,CAAEM,MAAOC,IAAYD,QAA3D,oB,uCAQkB,IAAVF,EAAS,EAATA,MACd,OAAOA,EAAQ,kBAAC,IAAD,CAAQA,MAAOA,IAAY,S,UAhBAI,GAoBxCP,EAAS,CACbC,cAAe,CACbO,WAAY,SACZC,cAAe,SACfC,eAAgB,SAChBC,WAAY,KC1BKC,E,4MACnBC,M,2BACK,EAAKA,O,IACRC,qBAAsB,CACpBjB,gBAAYkB,EACZC,OAAQ,K,EAoBZC,QAAU,SAACC,GACT,EAAKC,SAAS,CACZC,MAAM,EACNC,KAAK,wEAAD,OAAwBH,EAAUI,SACtCC,OAAQ,iE,EAIZ3B,kBAAoB,WAClB,EAAK4B,gBACFC,QAAQC,gCACRC,MAAK,SAACb,GACL,EAAKc,SAAS,CACZd,yBAEFe,YAAW,WACT,EAAKjC,sBAC0B,IAA9BkB,EAAqBE,WAEzBc,OAAM,SAACC,Q,kEAlCVrC,KAAKE,sB,+BAGG,IACAC,EAAeH,KAAKmB,MAAMC,qBAA1BjB,WACR,OACE,kBAAC,EAAD,eACEA,WAAYA,EACZmC,aAActC,KAAKuC,aACnBrC,kBAAmBF,KAAKE,mBACpBF,KAAKmB,Y,GApByBqB","file":"static/js/8.2633df16.chunk.js","sourcesContent":["import React from \"react\";\nimport View from \"online-shopping-cargo-parent/dist/view\";\nimport QRCode from \"qrcode.react\";\nimport styleSchema from \"online-shopping-cargo-parent/dist/styleSchema\";\nimport ApplicationComponentView from \"online-shopping-cargo-parent/dist/applicationComponent.view\";\n\nexport default class PickupQRCodeView extends ApplicationComponentView {\n  render() {\n    const { onGetPickupQrCode, pickupCode } = this.props;\n    return (\n      <this.Wrapper>\n        <View style={styles.rootContainer}>\n          <this.QRCodeSection value={pickupCode} />\n          <p onClick={onGetPickupQrCode} style={{ color: styleSchema.color }}>\n            刷新\n          </p>\n        </View>\n      </this.Wrapper>\n    );\n  }\n\n  QRCodeSection({ value }) {\n    return value ? <QRCode value={value} /> : null;\n  }\n}\n\nconst styles = {\n  rootContainer: {\n    alignItems: \"center\",\n    flexDirection: \"column\",\n    justifyContent: \"center\",\n    paddingTop: 20,\n  },\n};\n","import React from \"react\";\nimport { GET_PICKUP_QR_CODE } from \"online-shopping-cargo-parent/dist/service\";\nimport ClientApplicationComponent from \"../../clientApplicationComponent\";\nimport PickupQRCodeView from \"./pickupQRCode.view\";\n\nexport default class PickupQRCode extends ClientApplicationComponent {\n  state = {\n    ...this.state,\n    pickupQrCodeResponse: {\n      pickupCode: undefined,\n      expire: 0,\n    },\n  };\n\n  componentDidMount() {\n    this.onGetPickupQrCode();\n  }\n\n  render() {\n    const { pickupCode } = this.state.pickupQrCodeResponse;\n    return (\n      <PickupQRCodeView\n        pickupCode={pickupCode}\n        onCloseModal={this.onCloseError}\n        onGetPickupQrCode={this.onGetPickupQrCode}\n        {...this.state}\n      />\n    );\n  }\n\n  onError = (exception) => {\n    this.setError({\n      show: true,\n      body: `讀取QR Code出錯，請稍候再試\\n${exception.message}`,\n      header: \"AWS 伺服器出錯 🤕🤕\",\n    });\n  };\n\n  onGetPickupQrCode = () => {\n    this.serviceExecutor\n      .execute(GET_PICKUP_QR_CODE())\n      .then((pickupQrCodeResponse) => {\n        this.setState({\n          pickupQrCodeResponse,\n        });\n        setTimeout(() => {\n          this.onGetPickupQrCode();\n        }, pickupQrCodeResponse.expire * 1000);\n      })\n      .catch((ex) => {});\n  };\n}\n"],"sourceRoot":""}